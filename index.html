<!DOCTYPE html>
<!-- Document type declaration: HTML5 -->
<html lang="en"><!-- Root element with language for accessibility and SEO -->
<head><!-- Document head: metadata, fonts, styles, and performance hints -->
  <meta charset="utf-8"><!-- Character encoding for correct symbol rendering -->
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Responsive viewport for mobile -->
  <title>Sama Asheh – Artist</title><!-- Page title shown in browser tab -->

  <!-- Preconnect to Google Fonts for slightly faster font loading (performance tip) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Load Playfair Display for headings and Inter for UI text -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!--
    Inline CSS: full styling for single-file deployment.
    Each line or small block has a comment explaining purpose.
    Performance tip: move large CSS to external file for caching if you scale the site.
  -->
  <style>
    /* ---------- Base / Reset ---------- */
    /* Remove default margin and set base font stack */
    html, body { height: 100%; } /* ensure 100% height for background positioning */
    body { margin: 0; /* remove default margin */ 
      font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; /* readable UI font */
      background: #fdfaf6; /* soft cream background for warm tone */
      color: #222; /* main text color */
      -webkit-font-smoothing: antialiased; /* crisper fonts on Mac */
      -moz-osx-font-smoothing: grayscale; /* crisper fonts on Mac Firefox */
      overflow-x: hidden; /* avoid horizontal scroll from transforms */ }

    /* Make headings use Playfair to preserve artistic vibe */
    h1, h2, .heading-serif { font-family: 'Playfair Display', Georgia, serif; margin: 0; }

    /* Small utility: central container with reasonable max width */
    .site-container { max-width: 1100px; margin: 0 auto; padding: 0 1rem; position: relative; z-index: 2; }

    /* ---------- Watercolor Parallax Background ---------- */
    /* Full-screen fixed element to hold watercolor layers behind content */
    .bg-watercolor { position: fixed; inset: 0; z-index: 0; pointer-events: none; overflow: hidden; }
    /* Each watercolor layer is absolutely positioned and blurred for soft effect */
    .bg-watercolor__layer { position: absolute; width: 140%; height: 140%; top: -20%; left: -20%; filter: blur(40px); opacity: 0.26; mix-blend-mode: screen; transform-origin: center; transition: transform 0.2s linear; }
    /* Layer color variations for depth */
    .bg-watercolor__layer--warm { background: radial-gradient(circle at 20% 30%, #ffd4d4 0%, transparent 35%), radial-gradient(circle at 80% 70%, #fff1c9 0%, transparent 35%); }
    .bg-watercolor__layer--cool { background: radial-gradient(circle at 10% 80%, #e6f7ff 0%, transparent 35%), radial-gradient(circle at 70% 20%, #e8d4ff 0%, transparent 35%); }
    .bg-watercolor__layer--highlight { background: radial-gradient(circle at 50% 50%, #fef6e6 0%, transparent 45%), radial-gradient(circle at 30% 20%, #ffdfe6 0%, transparent 35%); }

    /* ---------- Header / Hero ---------- */
    /* Header area holds title and subtitle with soft glass effect */
    #site-header { text-align: center; padding: 4rem 1rem 2rem; background: rgba(255,255,255,0.84); backdrop-filter: blur(6px); position: relative; z-index: 3; }
    /* Animated gradient title — premium magazine feel */
    #site-title { font-size: 3rem; line-height: 1; display: inline-block; background: linear-gradient(135deg, #ffb3b3, #ffdca3, #cdb4ff); background-size: 400% 400%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: titleGradient 7s linear infinite; margin-bottom: 0.35rem; }
    @keyframes titleGradient { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    /* Subtitle/tagline */
    #site-tagline { color: #5b5b5b; font-size: 1.05rem; margin-top: 0.25rem; }

    /* ---------- Sticky Navigation ---------- */
    /* Sticky translucent nav that appears at the top; keeps nav visible on scroll */
    #main-nav { position: sticky; top: 0; z-index: 10; display: flex; justify-content: center; gap: 1.25rem; padding: 0.6rem 1rem; background: rgba(255,255,255,0.82); backdrop-filter: blur(8px); border-bottom: 1px solid rgba(0,0,0,0.04); font-family: 'Inter', sans-serif; }
    /* Nav links style */
    #main-nav a { color: #222; text-decoration: none; padding: 0.45rem 0.25rem; position: relative; font-weight: 600; }
    /* Hover underline animation for links */
    #main-nav a::after { content: ''; position: absolute; left: 0; bottom: -4px; height: 2px; width: 0; background: #222; transition: width 0.28s ease; }
    #main-nav a:hover::after { width: 100%; }

    /* ---------- Sections ---------- */
    /* Generic section spacing */
    section.site-section { padding: 2.5rem 0; position: relative; z-index: 2; }
    /* Headings inside sections */
    .section-heading { font-size: 1.6rem; margin-bottom: 0.9rem; }

    /* ---------- Animated fade-up utility ---------- */
    .motion-fade-up { opacity: 0; transform: translateY(18px); transition: opacity 0.6s ease, transform 0.6s ease; }
    .motion-fade-up.is-visible { opacity: 1; transform: translateY(0); }

    /* ---------- Video showcase ---------- */
    /* Center the hero video and give it subtle elevation */
    .showcase-video { display: block; width: 100%; max-width: 100%; border-radius: 12px; box-shadow: 0 8px 28px rgba(0,0,0,0.08); }

    /* ---------- Gallery (Masonry-ish using CSS columns) ---------- */
    /* Toggle area that acts like a curtain reveal trigger */
    .gallery-toggle { display: flex; justify-content: center; align-items: center; gap: 0.6rem; cursor: pointer; padding: 1.25rem; background: rgba(255,255,255,0.9); border-top: 1px solid rgba(0,0,0,0.04); border-bottom: 1px solid rgba(0,0,0,0.04); }
    .gallery-toggle__arrow { display: inline-block; transition: transform 0.35s ease; font-size: 1.1rem; }
    .gallery-toggle__arrow.is-rotated { transform: rotate(180deg); }

    /* Collapsible container: will expand/collapse smoothly */
    .gallery-collapsible { max-height: 0; overflow: hidden; transition: max-height 0.9s cubic-bezier(.2,.9,.2,1); }
    .gallery-collapsible.is-open { max-height: 6000px; } /* large enough to reveal tall galleries */

    /* Masonry-like layout via CSS columns for organic stacking */
    .art-gallery { column-count: 3; column-gap: 1rem; padding: 1.2rem 0; }
    /* Responsive columns */
    @media (max-width: 900px) { .art-gallery { column-count: 2; } }
    @media (max-width: 560px) { .art-gallery { column-count: 1; } }

    /* Each item is displayed inline-block so it flows into columns naturally */
    .art-gallery__item { display: inline-block; width: 100%; margin: 0 0 1rem; position: relative; transform-origin: center; transition: transform 0.28s ease, box-shadow 0.28s ease; }
    .art-gallery__image { width: 100%; display: block; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); transition: transform 0.45s cubic-bezier(.2,.9,.2,1); }
    .art-gallery__item:hover .art-gallery__image { transform: scale(1.06) rotate(0.4deg); } /* tactile hover zoom + tiny rotation */

    /* Caption overlay at bottom of image */
    .art-gallery__caption { position: absolute; left: 0; right: 0; bottom: 0; padding: 0.6rem 0; text-align: center; color: #fff; font-family: 'Playfair Display', serif; background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.6) 100%); opacity: 0; transform: translateY(6px); transition: opacity 0.22s ease, transform 0.22s ease; }
    .art-gallery__item:hover .art-gallery__caption { opacity: 1; transform: translateY(0); }

    /* Stagger helper: we'll set --delay inline in JS for each item for cascading entrance */
    .stagger { opacity: 0; transform: translateY(8px) scale(0.995); transition: opacity 0.5s ease var(--delay, 0s), transform 0.5s ease var(--delay, 0s); }
    .stagger.is-visible { opacity: 1; transform: translateY(0) scale(1); }

    /* ---------- Cinematic Lightbox ---------- */
    /* Fullscreen overlay with blur and fade */
    .lightbox-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column; /* STACK vertically so caption appears under the image */
      justify-content: center;
      align-items: center;
      gap: 1rem; /* space between image and caption */
      background: rgba(0,0,0,0.86);
      backdrop-filter: blur(10px);
      z-index: 9999;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.32s ease;
      padding: 2rem;
    }
    .lightbox-overlay.is-visible { opacity: 1; pointer-events: auto; }
    .lightbox-overlay__img { max-width: 92%; max-height: 78%; border-radius: 8px; box-shadow: 0 40px 80px rgba(0,0,0,0.6); display: block; }
    .lightbox-overlay__caption { margin-top: 1rem; color: #fff; font-family: 'Playfair Display', serif; text-align: center; }

    /* Controls inside lightbox */
    .lightbox-overlay__close, .lightbox-overlay__nav { position: absolute; color: #fff; font-size: 2rem; cursor: pointer; user-select: none; }
    .lightbox-overlay__close { top: 1.1rem; right: 1.1rem; }
    .lightbox-overlay__nav--prev { left: 1.1rem; top: 50%; transform: translateY(-50%); }
    .lightbox-overlay__nav--next { right: 1.1rem; top: 50%; transform: translateY(-50%); }

    /* ---------- Request Form ---------- */
    /* Form wrapper with soft background to stand out from page */
    .form-card { background: rgba(255,255,255,0.6); border-radius: 10px; padding: 1.25rem; box-shadow: 0 6px 20px rgba(0,0,0,0.04); }
    label.form-label { display: block; margin-bottom: 0.35rem; font-weight: 600; color: #333; }
    input[type="text"], input[type="email"], textarea, select.form-select { width: 100%; padding: 0.7rem; border-radius: 8px; border: 1px solid rgba(0,0,0,0.12); box-sizing: border-box; font-family: inherit; }
    .btn-primary { display: inline-block; padding: 0.75rem 1.2rem; background: #222; color: #fff; border-radius: 10px; border: none; cursor: pointer; font-weight: 600; transition: transform 0.18s ease, background 0.18s ease; }
    .btn-primary:hover { transform: translateY(-3px); background: #333; }

    /* ---------- Socials & Footer ---------- */
    .socials-list { display: flex; justify-content: center; gap: 1rem; align-items: center; }
    .socials-list img { height: 44px; transition: transform 0.22s ease, filter 0.22s ease; }
    .socials-list img:hover { transform: scale(1.06); filter: drop-shadow(0 6px 12px rgba(0,0,0,0.12)); }

    footer#site-footer { text-align: center; padding: 1.25rem; color: #9a9a9a; font-size: 0.95rem; }

    #lightbox-close,
    #lightbox-next,
    #lightbox-prev {
      for-size: 1.2rem /* Smaller, elegant size */
      padding: 6px 10px /* Balanced touch area */
      background-color: rgba(0,0,0,5); /* Soft overlay feel */
      color: white; 
      cursor: pointer;
    }

    /* Make interactive areas change cursor styling via JS by toggling class on body (see JS) */
    /* ---------- End of CSS ---------- */
  </style>
  <!-- Performance tip: consider preloading the hero video or a poster image if you want faster perceived load:
       <link rel="preload" as="video" href="media/artshow.mp4"> -->
</head>

<body>
  <!-- Custom brush cursor element injected in DOM for full control (JS will move it) -->
  <div id="site-cursor" class="cursor-brush cursor-brush--glow" aria-hidden="true"></div>

  <!-- Watercolor background layers (parallax) -->
  <div class="bg-watercolor" aria-hidden="true">
    <div class="bg-watercolor__layer bg-watercolor__layer--warm" data-parallax-speed="0.12"></div><!-- warm layer -->
    <div class="bg-watercolor__layer bg-watercolor__layer--cool" data-parallax-speed="0.18"></div><!-- cool layer -->
    <div class="bg-watercolor__layer bg-watercolor__layer--highlight" data-parallax-speed="0.24"></div><!-- highlight layer -->
  </div>

  <!-- Header / Hero -->
  <header id="site-header">
    <div class="site-container"><!-- wrapper for consistent left/right padding -->
      <h1 id="site-title">Sama Asheh</h1><!-- main title — preserved text exactly -->
      <p id="site-tagline">Visual Artist & Dreamweaver</p><!-- tagline preserved -->
    </div>
  </header>

  <!-- Sticky Navigation with anchor links -->
  <nav id="main-nav" aria-label="Primary">
    <a href="#about-artist">About</a>
    <a href="#featured-gallery">Gallery</a>
    <a href="#commission-request">Request</a>
    <a href="#contact-info">Contact</a>
  </nav>

  <!-- Main content container -->
  <main class="site-container" id="main-content">

    <!-- ABOUT SECTION -->
    <section id="about-artist" class="site-section motion-fade-up" aria-labelledby="about-heading">
      <h2 id="about-heading" class="section-heading heading-serif">About Sama</h2><!-- heading with serif font -->
      <!-- Paragraph preserved exactly from original as requested -->
      <p><i>Sama Asheh is a Palestinian artist with a love for capturing people's stories through art. I started drawing strangers in public places, gifting them their portraits without expecting anything in return. For me, art is a bridge—no words, just a pencil and a little kindness. My work is inspired by real moments, human connections, and the beauty of everyday life. Now based in Atlanta, I continue to create portraits, murals, and custom artwork, sharing pieces of my heart with every stroke.</i></p>
    </section>

    <!-- VIDEO SHOWCASE -->
    <section id="featured-gallery" class="site-section motion-fade-up" aria-labelledby="featured-heading" style="text-align:center;">
      <h2 id="featured-heading" class="section-heading heading-serif">Featured Reel</h2><!-- small heading for video -->
      <!-- Using playsinline and muted to allow autoplay on mobile where permitted -->
      <video class="showcase-video" src="media/artshow.mp4" autoplay muted loop playsinline aria-label="Art showcase video">
        <!-- Note: browsers may block autoplay if not muted; include a poster image if needed for better UX -->
      </video>
      <!-- Performance tip: add a poster="media/artshow-poster.jpg" attribute if you have a representative poster image -->
    </section>

    <!-- GALLERY TOGGLE (curtain reveal) -->
    <div class="gallery-toggle motion-fade-up" id="toggle-beyond-gallery" role="button" aria-expanded="false" aria-controls="beyond-gallery-collapsible" tabindex="0">
      <span>Beyond the Frame</span><!-- visible label -->
      <span id="gallery-toggle-arrow" class="gallery-toggle__arrow">&#9660;</span><!-- arrow that rotates -->
    </div>

    <!-- COLLAPSIBLE GALLERY (masonry columns) -->
    <div id="beyond-gallery-collapsible" class="gallery-collapsible" aria-hidden="true">
      <section aria-labelledby="beyond-heading" class="site-section">
        <h2 id="beyond-heading" class="section-heading heading-serif">Beyond the Frame</h2><!-- duplicated title for accessibility -->
        <!-- Gallery uses CSS columns to create a masonry-like layout; JS will add .stagger and inline --delay for cascading entrance -->
        <div id="art-gallery" class="art-gallery" role="list" aria-live="polite">
          <!-- Each item: preserve filenames exactly as srcs from original -->
          <div class="art-gallery__item stagger" role="listitem" data-src="images/Blind World, Bleeding Land.JPG">
            <img class="art-gallery__image" src="images/Blind World, Bleeding Land.JPG" alt="Blind World, Bleeding Land" loading="lazy">
            <div class="art-gallery__caption">Blind World, Bleeding Land</div>
          </div>

          <div class="art-gallery__item stagger" role="listitem" data-src="images/Orphaned.jpg">
            <img class="art-gallery__image" src="images/Orphaned.jpg" alt="Orphaned" loading="lazy">
            <div class="art-gallery__caption">Orphaned</div>
          </div>

          <div class="art-gallery__item stagger" role="listitem" data-src="images/Mister.PNG">
            <img class="art-gallery__image" src="images/Mister.PNG" alt="Mister" loading="lazy">
            <div class="art-gallery__caption">Mister</div>
          </div>

          <div class="art-gallery__item stagger" role="listitem" data-src="images/Wets Hands.jpg">
            <img class="art-gallery__image" src="images/Wets Hands.jpg" alt="Surviving Hands" loading="lazy">
            <div class="art-gallery__caption">Surviving Hands</div>
          </div>

          <!-- Performance tip: for many images, consider using responsive srcset and WebP for smaller file sizes:
               <img src="small.jpg" srcset="small.webp 480w, medium.webp 960w, large.webp 1600w" sizes="(max-width:600px) 100vw, 33vw"> -->
        </div>
      </section>
    </div>

    <!-- REQUEST / COMMISSION FORM -->
    <section id="commission-request" class="site-section motion-fade-up" aria-labelledby="request-heading">
      <h2 id="request-heading" class="section-heading heading-serif">Request an Artwork</h2>
      <p>If you’d like a custom piece, fill out the quick form and Sama will reply via email.</p>

      <!-- Form intentionally uses mailto behaviour to open user's client; replace with server endpoint for production -->
      <div class="form-card" style="max-width:700px; margin: 0 auto;">
        <form id="commission-form" onsubmit="return handleCommissionForm(event)" aria-label="Request an artwork form">
          <label class="form-label" for="client-name">Your Name</label>
          <input id="client-name" type="text" required>

          <label class="form-label" for="client-email" style="margin-top:0.75rem;">Your Email</label>
          <input id="client-email" type="email" required>

          <label class="form-label" for="art-description" style="margin-top:0.75rem;">Artwork Description</label>
          <textarea id="art-description" rows="5" required></textarea>

          <label class="form-label" for="payment-method" style="margin-top:0.75rem;">Preferred Payment Method</label>
          <select id="payment-method" class="form-select" required>
            <option value="">Select one</option>
            <option value="PayPal">PayPal</option>
            <option value="Venmo">Venmo</option>
            <option value="Zelle">Zelle</option>
            <option value="Apple Pay">Apple Pay</option>
            <option value="Cash App">Cash App</option>
          </select>

          <!-- Small icons only for visual guidance; ensure image files exist or replace with SVGs -->
          <div style="display:flex; justify-content:space-around; align-items:center; margin:1rem 0;">
            <img src="images/paypal.png" alt="PayPal" style="height:32px;">
            <img src="images/venmo.png" alt="Venmo" style="height:32px;">
            <img src="images/zelle.png" alt="Zelle" style="height:32px;">
            <img src="images/applepay.png" alt="Apple Pay" style="height:32px;">
            <img src="images/cashapp.png" alt="Cash App" style="height:32px;">
          </div>

          <button type="submit" class="btn-primary">Send Request</button>
          <!-- Performance tip: If you move to a server-backed form, implement server-side validation and CAPTCHA to reduce spam -->
        </form>
      </div>
    </section>

    <!-- CONTACT / SOCIAL LINKS -->
    <section id="contact-info" class="site-section motion-fade-up" aria-labelledby="contact-heading" style="text-align:center;">
      <h2 id="contact-heading" class="section-heading heading-serif">Contact</h2>
      <div class="socials-list" role="navigation" aria-label="Social links">
        <!-- mailto will open user's email client -->
        <a href="mailto:sama.asheh2@gmail.com" rel="noopener"><img src="images/gmail.gif" alt="Email Sama"></a>
        <!-- external links open in new tab using target="_blank" if desired (kept inline to match original behaviour) -->
        <a href="https://instagram.com/sama_asheh" target="_blank" rel="noopener noreferrer"><img src="images/instagram.gif" alt="Instagram"></a>
        <a href="https://tiktok.com/@sama.asheh1" target="_blank" rel="noopener noreferrer"><img src="images/tiktok.gif" alt="TikTok"></a>
      </div>
    </section>

  </main>

  <!-- FOOTER -->
  <footer id="site-footer">
    &copy; 2025 Sama Asheh. All rights reserved.
  </footer>

  <!-- LIGHTBOX (hidden by default) -->
  <div id="lightbox-overlay" class="lightbox-overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <button class="lightbox-overlay__close" id="lightbox-close" aria-label="Close lightbox">&times;</button><!-- accessible close -->
    <button class="lightbox-overlay__nav lightbox-overlay__nav--prev" id="lightbox-prev" aria-label="Previous image">&#10094;</button>
    <img id="lightbox-image" class="lightbox-overlay__img" src="" alt="">
    <button class="lightbox-overlay__nav lightbox-overlay__nav--next" id="lightbox-next" aria-label="Next image">&#10095;</button>
    <p id="lightbox-caption" class="lightbox-overlay__caption" aria-live="polite"></p><!-- caption read by screen readers -->
  </div>

  <!--
    Inline JavaScript: interaction logic.
    Each line is commented to explain what it does.
    Performance note: for larger sites move JS to external file and defer it with `defer` to allow HTML parsing first.
  -->
  <script>
    // ---------- Helper selectors ----------
    const body = document.body; // shorthand for document.body
    const cursorEl = document.getElementById('site-cursor'); // custom brush cursor element
    const parallaxLayers = document.querySelectorAll('.bg-watercolor__layer'); // watercolor layers
    const fadeElements = document.querySelectorAll('.motion-fade-up'); // elements to animate on scroll
    const galleryToggleBtn = document.getElementById('toggle-beyond-gallery'); // gallery toggle button
    const galleryArrow = document.getElementById('gallery-toggle-arrow'); // small arrow inside toggle
    const galleryCollapsible = document.getElementById('beyond-gallery-collapsible'); // collapsible gallery container
    const galleryItems = document.querySelectorAll('.art-gallery__item'); // all gallery items
    const lightboxOverlay = document.getElementById('lightbox-overlay'); // lightbox overlay element
    const lightboxImage = document.getElementById('lightbox-image'); // img inside lightbox
    const lightboxCaption = document.getElementById('lightbox-caption'); // caption element inside lightbox
    const lightboxCloseBtn = document.getElementById('lightbox-close'); // close button
    const lightboxPrevBtn = document.getElementById('lightbox-prev'); // previous button
    const lightboxNextBtn = document.getElementById('lightbox-next'); // next button
    let currentLightboxIndex = 0; // track currently displayed index in lightbox

    // ---------- Custom cursor movement ----------
    /* Move the custom brush cursor element to follow pointer.
       This creates the brush-tip effect without external images. */
    window.addEventListener('pointermove', (e) => {
      // Position the cursor element at pointer coordinates
      cursorEl.style.left = e.clientX + 'px';
      cursorEl.style.top = e.clientY + 'px';
    });

    // Scale cursor when pressing (simulate dipping brush) */
    window.addEventListener('pointerdown', () => { cursorEl.classList.add('cursor-brush--active-press'); });
    window.addEventListener('pointerup', () => { cursorEl.classList.remove('cursor-brush--active-press'); });

    // Hide custom cursor during keyboard navigation to avoid confusion for keyboard-only users
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Tab') cursorEl.style.display = 'none';
    });
    window.addEventListener('click', () => { cursorEl.style.display = ''; });

    // Make the cursor subtle on mobile by hiding it (mobile has no mouse pointer)
    if (/Mobi|Android/i.test(navigator.userAgent)) {
      cursorEl.style.display = 'none';
    }

    // ---------- Parallax watercolor effect ----------
    /* Move watercolor layers at different speeds on scroll for depth.
       Each layer has a data attribute data-parallax-speed */
    function updateParallax() {
      const scrollY = window.scrollY || window.pageYOffset;
      parallaxLayers.forEach(layer => {
        const speed = parseFloat(layer.getAttribute('data-parallax-speed')) || 0.12;
        // translateY for parallax; smaller movement for subtlety
        layer.style.transform = `translate3d(0, ${scrollY * speed}px, 0)`;
      });
    }
    // Use passive listener for performance on scroll
    window.addEventListener('scroll', updateParallax, { passive: true });
    // Run once to ensure initial placement
    updateParallax();

    // ---------- IntersectionObserver for fade-up and staggered reveal ----------
    /* Reveal elements when they enter viewport; unobserve after reveal to improve performance */
    const intersectionObserver = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          // Add visible class for motion-fade-up elements
          const el = entry.target;
          el.classList.add('is-visible');
          // If it's the gallery, stagger children
          if (el.id === 'art-gallery' || el.classList.contains('art-gallery')) {
            // stagger children with variable delay
            const children = el.querySelectorAll('.stagger');
            children.forEach((child, idx) => {
              child.style.setProperty('--delay', (idx * 0.08) + 's'); // set CSS variable --delay
              // add is-visible slightly after to trigger transition defined in CSS
              setTimeout(() => child.classList.add('is-visible'), idx * 80 + 200);
            });
          }
          obs.unobserve(el); // don't observe again
        }
      });
    }, { threshold: 0.12 });

    // Observe all motion-fade-up elements on the page
    fadeElements.forEach(el => intersectionObserver.observe(el));

    // ---------- Gallery toggle (curtain reveal) ----------
    /* Toggle the collapsible gallery's open state, rotate arrow, update aria attributes,
       and trigger staggered animation for gallery items when opened. */
    function toggleGallery() {
      const isOpen = galleryCollapsible.classList.toggle('is-open'); // toggle open state
      galleryArrow.classList.toggle('is-rotated', isOpen); // rotate arrow visually
      galleryToggleBtn.setAttribute('aria-expanded', isOpen ? 'true' : 'false'); // accessibility
      galleryCollapsible.setAttribute('aria-hidden', isOpen ? 'false' : 'true'); // accessibility

      // If opening, scroll smoothly and dispatch a small animation sequence
      if (isOpen) {
        setTimeout(() => {
          galleryCollapsible.scrollIntoView({ behavior: 'smooth', block: 'start' });
          // trigger staggered reveal for items inside gallery (if not already visible)
          const staggerItems = document.querySelectorAll('#art-gallery .stagger');
          staggerItems.forEach((it, i) => {
            it.style.setProperty('--delay', (i * 0.06) + 's');
            setTimeout(() => it.classList.add('is-visible'), i * 60 + 160);
          });
        }, 320);
      }
    }

    // Attach click and keyboard (Enter/Space) handlers for the toggle button for accessibility
    galleryToggleBtn.addEventListener('click', toggleGallery);
    galleryToggleBtn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleGallery(); }
    });

    // ---------- Lightbox functionality ----------
    /* Build a lightweight lightbox with keyboard navigation and ARIA handling.
       The gallery items act as the source of images. */
    const galleryList = Array.from(document.querySelectorAll('.art-gallery__item')); // array for index lookup

    // Utility: open lightbox at specific index
    function openLightboxAtIndex(index) {
      // clamp index to valid range
      if (index < 0) index = galleryList.length - 1;
      if (index >= galleryList.length) index = 0;
      currentLightboxIndex = index; // store current
      const item = galleryList[index]; // gallery item element
      const imgEl = item.querySelector('.art-gallery__image'); // image element inside item
      // set lightbox image src and alt for accessibility
      lightboxImage.src = imgEl.src;
      lightboxImage.alt = imgEl.alt || '';
      lightboxCaption.textContent = (item.querySelector('.art-gallery__caption') || { textContent: '' }).textContent;
      // reveal overlay and update ARIA
      lightboxOverlay.classList.add('is-visible');
      lightboxOverlay.setAttribute('aria-hidden', 'false');
      // set focusable on close for keyboard users
      lightboxCloseBtn.focus();
    }

    // Close the lightbox and remove src to free memory in some browsers
    function closeLightbox() {
      lightboxOverlay.classList.remove('is-visible');
      lightboxOverlay.setAttribute('aria-hidden', 'true');
      // remove src to stop further decoding/large memory usage
      lightboxImage.src = '';
      lightboxImage.alt = '';
      lightboxCaption.textContent = '';
    }

    // Next and previous navigation
    function showNextInLightbox() { openLightboxAtIndex((currentLightboxIndex + 1) % galleryList.length); }
    function showPrevInLightbox() { openLightboxAtIndex((currentLightboxIndex - 1 + galleryList.length) % galleryList.length); }

    // Add click listeners to gallery images to open lightbox
    galleryList.forEach((galleryItem, idx) => {
      galleryItem.addEventListener('click', (e) => {
        e.preventDefault();
        openLightboxAtIndex(idx);
      });
      // Also allow Enter key on focused gallery item to open lightbox
      galleryItem.addEventListener('keydown', (ev) => {
        if (ev.key === 'Enter' || ev.key === ' ') { ev.preventDefault(); openLightboxAtIndex(idx); }
      });
      // Make each gallery item focusable for keyboard navigation
      galleryItem.setAttribute('tabindex', '0');
    });

    // Lightbox control event listeners
    lightboxCloseBtn.addEventListener('click', closeLightbox);
    lightboxNextBtn.addEventListener('click', showNextInLightbox);
    lightboxPrevBtn.addEventListener('click', showPrevInLightbox);

    // Close lightbox on clicking outside the image (overlay area)
    lightboxOverlay.addEventListener('click', (e) => {
      if (e.target === lightboxOverlay) closeLightbox();
    });

    // Keyboard navigation while lightbox is open
    document.addEventListener('keydown', (e) => {
      if (!lightboxOverlay.classList.contains('is-visible')) return; // ignore if closed
      if (e.key === 'Escape') closeLightbox();
      if (e.key === 'ArrowRight') showNextInLightbox();
      if (e.key === 'ArrowLeft') showPrevInLightbox();
    });

    // ---------- Commission form behaviour (mailto fallback) ----------
    /* Build a mailto: link from form inputs. This is simple and matches original behaviour.
       If you migrate to a server-side endpoint later, replace this handler accordingly. */
    function handleCommissionForm(e) {
      e.preventDefault(); // prevent default submission
      const name = document.getElementById('client-name').value.trim();
      const email = document.getElementById('client-email').value.trim();
      const description = document.getElementById('art-description').value.trim();
      const payment = document.getElementById('payment-method').value.trim();
      // Basic validation (inputs are required already, but double-check)
      if (!name || !email || !description || !payment) {
        alert('Please fill out all required fields.');
        return false;
      }
      // Subject and body URL encoding
      const subject = encodeURIComponent('Artwork Request from ' + name);
      const body = encodeURIComponent(`Name: ${name}\nEmail: ${email}\n\nArtwork Description:\n${description}\n\nPreferred Payment Method: ${payment}`);
      // Ask user before opening their email client
      if (!confirm('Open your email client to send the artwork request?')) return false;
      // Use mailto to open default client
      window.location.href = `mailto:sama.asheh2@gmail.com?subject=${subject}&body=${body}`;
      return false;
    }

    // ---------- Small accessibility / keyboard niceties ----------
    // Allow nav links to smooth-scroll to sections
    document.querySelectorAll('#main-nav a').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const href = this.getAttribute('href');
        const target = document.querySelector(href);
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });

    // ---------- Initializations for UX polish ----------
    // Observe the gallery container itself so it staggers nicely on first open if it is visible
    const artGallery = document.getElementById('art-gallery');
    if (artGallery) intersectionObserver.observe(artGallery);

    // Add small hover hint: when hovering an image, subtly brighten cursor
    document.querySelectorAll('.art-gallery__image').forEach(img => {
      img.addEventListener('pointerenter', () => { cursorEl.style.boxShadow = '0 8px 26px rgba(197,137,255,0.28)'; });
      img.addEventListener('pointerleave', () => { cursorEl.style.boxShadow = '0 6px 16px rgba(197,137,255,0.18)'; });
    });

    // ---------- Performance and SEO Recommendations (inline notes) ----------
    /* 1) Images: convert to WebP and provide srcset for responsive sizes. Example:
         <img src="img-small.webp" srcset="img-medium.webp 800w, img-large.webp 1600w" sizes="(max-width:600px) 100vw, 33vw" alt="...">
       2) Video: add a poster attribute and optionally preload="metadata" to improve perceived performance.
       3) Fonts: consider self-hosting or using font-display: swap via @font-face for better CLS and FOUT handling.
       4) Externalize CSS and JS into separate files and add <link rel="preload"> or defer the JS to improve first paint.
       5) Accessibility: for lightbox, consider implementing focus-trap so keyboard focus stays inside when open.
    */

    // End of script
  </script>

  <script>
  const toggleBtn = document.getElementById('toggle-beyond-gallery');
  const collapsible = document.getElementById('beyond-gallery-collapsible');
  const arrow = document.getElementById('gallery-toggle-arrow');
  const galleryItems = document.querySelectorAll('.art-gallery__item');

  function toggleGallery() {
    const isOpen = collapsible.classList.toggle('is-open');
    toggleBtn.setAttribute('aria-expanded', isOpen);
    collapsible.setAttribute('aria-hidden', !isOpen);
    arrow.classList.toggle('is-rotated', isOpen);

    if (isOpen) {
      // Animate fade-in stagger on each gallery item
      galleryItems.forEach((item, i) => {
        item.style.setProperty('--delay', (i * 0.08) + 's');
        item.classList.add('is-visible');
      });
    } else {
      galleryItems.forEach(item => item.classList.remove('is-visible'));
    }
  }

  toggleBtn.addEventListener('click', toggleGallery);

  toggleBtn.addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      toggleGallery();
    }
  });
</script>

</body>
</html>
